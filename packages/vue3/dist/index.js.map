{"version":3,"file":"index.js","sources":["../src/composables/useDatePicker.ts","../src/components/CalendarHeader.vue","../src/components/CalendarGrid.vue","../src/components/DualDatePicker.vue","../src/index.ts"],"sourcesContent":["import { ref, computed, watch, type Ref } from 'vue';\nimport type {\n    CalendarAdapter,\n    CalendarDate,\n    CalendarMonth,\n    LocaleConfig\n} from '@dual-datepicker/core';\nimport {\n    GregorianAdapter,\n    HijriAdapter,\n    generateCalendarMonth,\n    nextMonth,\n    previousMonth,\n    nextYear,\n    previousYear,\n    goToToday,\n    getLocale\n} from '@dual-datepicker/core';\n\nexport interface DateRange {\n    start: CalendarDate | null;\n    end: CalendarDate | null;\n}\n\nexport interface UseDatePickerOptions {\n    calendar?: Ref<'gregorian' | 'hijri'> | 'gregorian' | 'hijri';\n    locale?: Ref<string> | string;\n    range?: Ref<boolean> | boolean;\n    time?: Ref<boolean> | boolean;\n    modelValue?: Ref<CalendarDate | null | DateRange>;\n    format?: Ref<string> | string;\n    inputFormat?: Ref<string | null> | string | null;\n    minDate?: Ref<CalendarDate | null> | CalendarDate | null;\n    maxDate?: Ref<CalendarDate | null> | CalendarDate | null;\n    disabledDates?: Ref<CalendarDate[]> | CalendarDate[];\n    disabledDaysOfWeek?: Ref<number[]> | number[];\n}\n\nexport function useDatePicker(options: UseDatePickerOptions = {}) {\n    // Reactive options\n    const calendarType = ref(\n        typeof options.calendar === 'object' ? options.calendar.value : (options.calendar || 'gregorian')\n    );\n    const localeCode = ref(\n        typeof options.locale === 'object' ? options.locale.value : (options.locale || 'en')\n    );\n    const isRange = ref(\n        typeof options.range === 'object' ? options.range.value : (options.range || false)\n    );\n    const includeTime = ref(\n        typeof options.time === 'object' ? options.time.value : (options.time || false)\n    );\n\n    // Adapter management\n    const adapter = computed<CalendarAdapter>(() => {\n        return calendarType.value === 'hijri' ? new HijriAdapter() : new GregorianAdapter();\n    });\n\n    const locale = computed<LocaleConfig>(() => {\n        return getLocale(localeCode.value);\n    });\n\n    // Options\n    const dateFormat = ref(\n        typeof options.format === 'object' ? options.format.value : (options.format || 'dd/MM/yyyy')\n    );\n    const inputDateFormat = ref(\n        typeof options.inputFormat === 'object' \n            ? options.inputFormat.value \n            : (options.inputFormat || null)\n    );\n    const minDate = ref(\n        typeof options.minDate === 'object' \n            ? options.minDate.value \n            : (options.minDate || null)\n    );\n    const maxDate = ref(\n        typeof options.maxDate === 'object' \n            ? options.maxDate.value \n            : (options.maxDate || null)\n    );\n    const disabledDates = ref(\n        typeof options.disabledDates === 'object' \n            ? options.disabledDates.value \n            : (options.disabledDates || [])\n    );\n    const disabledDaysOfWeek = ref(\n        typeof options.disabledDaysOfWeek === 'object' \n            ? options.disabledDaysOfWeek.value \n            : (options.disabledDaysOfWeek || [])\n    );\n\n    // State\n    const modelValue = computed(() => options.modelValue?.value);\n    const selectedDate = ref<CalendarDate | null>(\n        isRange.value ? null : (modelValue.value as CalendarDate | null)\n    );\n    const selectedRange = ref<DateRange>(\n        isRange.value \n            ? (modelValue.value as DateRange || { start: null, end: null })\n            : { start: null, end: null }\n    );\n    const today = computed(() => adapter.value.today());\n    // Separate view state (independent of selectedDate)\n    const viewMonth = ref<number | null>(null);\n    const viewYear = ref<number | null>(null);\n    const currentMonth = computed(() => {\n        if (viewMonth.value !== null) return viewMonth.value;\n        return selectedDate.value ? selectedDate.value.month : today.value.month;\n    });\n    const currentYear = computed(() => {\n        if (viewYear.value !== null) return viewYear.value;\n        return selectedDate.value ? selectedDate.value.year : today.value.year;\n    });\n    const focusedDate = ref<CalendarDate | null>(null);\n    const isOpen = ref(false);\n    const inputValue = ref('');\n    const inputError = ref(false);\n\n    // Calendar month generation\n    const calendarMonth = computed<CalendarMonth>(() => {\n        return generateCalendarMonth(\n            currentYear.value,\n            currentMonth.value,\n            adapter.value,\n            locale.value,\n            isRange.value ? null : selectedDate.value,\n            undefined,\n            {\n                selectedRange: isRange.value ? selectedRange.value : undefined,\n                minDate: minDate.value || undefined,\n                maxDate: maxDate.value || undefined,\n                disabledDates: disabledDates.value.length > 0 ? disabledDates.value : undefined,\n                disabledDaysOfWeek: disabledDaysOfWeek.value.length > 0 ? disabledDaysOfWeek.value : undefined\n            }\n        );\n    });\n\n    // Month name\n    const currentMonthName = computed(() => {\n        return adapter.value.getMonthName(currentMonth.value, locale.value);\n    });\n\n    // Navigation - only updates view, not selection\n    function updateView(year: number, month: number) {\n        viewYear.value = year;\n        viewMonth.value = month;\n    }\n\n    function goToNextMonth() {\n        const next = nextMonth(currentYear.value, currentMonth.value);\n        updateView(next.year, next.month);\n    }\n\n    function goToPreviousMonth() {\n        const prev = previousMonth(currentYear.value, currentMonth.value);\n        updateView(prev.year, prev.month);\n    }\n\n    function goToNextYear() {\n        const next = nextYear(currentYear.value, currentMonth.value);\n        updateView(next.year, next.month);\n    }\n\n    function goToPreviousYear() {\n        const prev = previousYear(currentYear.value, currentMonth.value);\n        updateView(prev.year, prev.month);\n    }\n\n    function goToTodayMonth() {\n        const todayDate = adapter.value.today();\n        if (validateDate(todayDate)) {\n            if (isRange.value) {\n                selectedRange.value = { start: todayDate, end: todayDate };\n            } else {\n                selectedDate.value = todayDate;\n            }\n            viewMonth.value = null;\n            viewYear.value = null;\n        }\n    }\n\n    // Date selection\n    function selectDate(date: CalendarDate) {\n        if (isRange.value) {\n            // Range selection logic\n            if (!selectedRange.value.start || (selectedRange.value.start && selectedRange.value.end)) {\n                // Start new range\n                selectedRange.value = { start: date, end: null };\n            } else {\n                // Complete the range\n                const compare = adapter.value.compare(date, selectedRange.value.start);\n                if (compare < 0) {\n                    // Selected date is before start, make it the new start\n                    selectedRange.value = { start: date, end: selectedRange.value.start };\n                } else {\n                    // Selected date is after start, make it the end\n                    selectedRange.value = { start: selectedRange.value.start, end: date };\n                }\n                isOpen.value = false;\n            }\n        } else {\n            // Single date selection\n        selectedDate.value = date;\n            viewMonth.value = null;\n            viewYear.value = null;\n            isOpen.value = false;\n        }\n    }\n\n    function clearSelection() {\n        if (isRange.value) {\n            selectedRange.value = { start: null, end: null };\n        } else {\n            selectedDate.value = null;\n        }\n        inputValue.value = '';\n        inputError.value = false;\n        viewMonth.value = null;\n        viewYear.value = null;\n    }\n\n    // Validation\n    function validateDate(date: CalendarDate): boolean {\n        if (!date || !adapter.value.isValid(date)) return false;\n        \n        // Check min/max constraints\n        if (minDate.value && adapter.value.compare(date, minDate.value) < 0) return false;\n        if (maxDate.value && adapter.value.compare(date, maxDate.value) > 0) return false;\n        \n        // Check disabled dates\n        if (disabledDates.value.some(d => adapter.value.isSameDay(d, date))) return false;\n        \n        // Check disabled days of week\n        const dayOfWeek = adapter.value.getDayOfWeek(date);\n        if (disabledDaysOfWeek.value.includes(dayOfWeek)) return false;\n        \n        return true;\n    }\n\n    // Input parsing\n    const displayFormat = computed(() => inputDateFormat.value || dateFormat.value);\n\n    function parseInputValue(value: string): boolean {\n        if (!value.trim()) {\n            if (isRange.value) {\n                selectedRange.value = { start: null, end: null };\n            } else {\n        selectedDate.value = null;\n            }\n            inputError.value = false;\n            return true;\n        }\n\n        const format = displayFormat.value;\n\n        if (isRange.value) {\n            // Try to parse range (format: \"start - end\" or \"start-end\")\n            const parts = value.split(/[\\s-–—]+/).filter(p => p.trim());\n            if (parts.length === 2) {\n                const start = adapter.value.parse(parts[0].trim(), format, locale.value);\n                const end = adapter.value.parse(parts[1].trim(), format, locale.value);\n                if (start && end && validateDate(start) && validateDate(end)) {\n                    const compare = adapter.value.compare(start, end);\n                    selectedRange.value = compare <= 0 \n                        ? { start, end }\n                        : { start: end, end: start };\n                    inputError.value = false;\n                    return true;\n                }\n            }\n            inputError.value = true;\n            return false;\n        } else {\n            const parsed = adapter.value.parse(value, format, locale.value);\n            if (parsed && validateDate(parsed)) {\n                selectedDate.value = parsed;\n                inputError.value = false;\n                viewMonth.value = null;\n                viewYear.value = null;\n                return true;\n            } else {\n                inputError.value = true;\n                return false;\n            }\n        }\n    }\n\n    function updateInputValue() {\n        inputValue.value = formattedDate.value;\n        inputError.value = false;\n    }\n\n    // Calendar switching\n    function switchCalendar(newCalendar: 'gregorian' | 'hijri') {\n        if (calendarType.value === newCalendar) return;\n\n        // Convert current selected date to new calendar system\n        if (isRange.value && selectedRange.value.start) {\n            const jsDate = adapter.value.toJsDate(selectedRange.value.start);\n            calendarType.value = newCalendar;\n            const newAdapter = calendarType.value === 'hijri' ? new HijriAdapter() : new GregorianAdapter();\n            const convertedStart = newAdapter.fromJsDate(jsDate);\n            if (selectedRange.value.end) {\n                const jsDateEnd = adapter.value.toJsDate(selectedRange.value.end);\n                const convertedEnd = newAdapter.fromJsDate(jsDateEnd);\n                selectedRange.value = { start: convertedStart, end: convertedEnd };\n            } else {\n                selectedRange.value = { start: convertedStart, end: null };\n            }\n            viewMonth.value = null;\n            viewYear.value = null;\n        } else if (selectedDate.value) {\n            const jsDate = adapter.value.toJsDate(selectedDate.value);\n            calendarType.value = newCalendar;\n            const newAdapter = calendarType.value === 'hijri' ? new HijriAdapter() : new GregorianAdapter();\n            selectedDate.value = newAdapter.fromJsDate(jsDate);\n            viewMonth.value = null;\n            viewYear.value = null;\n        } else {\n            calendarType.value = newCalendar;\n            const todayInNewCalendar = adapter.value.today();\n            viewMonth.value = null;\n            viewYear.value = null;\n        }\n    }\n\n    // Format selected date\n    const formattedDate = computed(() => {\n        if (isRange.value) {\n            if (!selectedRange.value || (!selectedRange.value.start && !selectedRange.value.end)) {\n                return '';\n            }\n            if (selectedRange.value.start && selectedRange.value.end) {\n                const start = adapter.value.format(selectedRange.value.start, dateFormat.value, locale.value);\n                const end = adapter.value.format(selectedRange.value.end, dateFormat.value, locale.value);\n                return `${start} - ${end}`;\n            }\n            if (selectedRange.value.start) {\n                return adapter.value.format(selectedRange.value.start, dateFormat.value, locale.value);\n            }\n            return '';\n        }\n        if (!selectedDate.value) return '';\n        return adapter.value.format(selectedDate.value, dateFormat.value, locale.value);\n    });\n\n    // Toggle picker\n    function toggle() {\n        isOpen.value = !isOpen.value;\n    }\n\n    function open() {\n        isOpen.value = true;\n    }\n\n    function close() {\n        isOpen.value = false;\n    }\n\n    // Sync modelValue changes to internal state\n    if (options.modelValue) {\n        watch(() => options.modelValue.value, (newVal) => {\n            if (isRange.value) {\n                if (newVal && typeof newVal === 'object' && 'start' in newVal) {\n                    selectedRange.value = newVal as DateRange;\n                    updateInputValue();\n                } else if (!newVal) {\n                    selectedRange.value = { start: null, end: null };\n                    updateInputValue();\n                }\n            } else {\n                if (newVal && !('start' in newVal)) {\n                    selectedDate.value = newVal as CalendarDate;\n                    updateInputValue();\n                    viewMonth.value = null;\n                    viewYear.value = null;\n                } else if (!newVal) {\n                    selectedDate.value = null;\n                    updateInputValue();\n                    viewMonth.value = null;\n                    viewYear.value = null;\n                }\n            }\n        }, { immediate: true });\n    }\n\n    return {\n        // State\n        selectedDate,\n        selectedRange,\n        today,\n        currentMonth,\n        currentYear,\n        currentMonthName,\n        focusedDate,\n        isOpen,\n        calendarMonth,\n        adapter,\n        locale,\n        calendarType,\n        localeCode,\n        viewMonth,\n        viewYear,\n        inputValue,\n        inputError,\n        displayFormat,\n\n        // Actions\n        selectDate,\n        clearSelection,\n        updateView,\n        goToNextMonth,\n        goToPreviousMonth,\n        goToNextYear,\n        goToPreviousYear,\n        goToTodayMonth,\n        switchCalendar,\n        toggle,\n        open,\n        close,\n        validateDate,\n        parseInputValue,\n        updateInputValue,\n\n        // Computed\n        formattedDate\n    };\n}\n","<template>\n  <div ref=\"headerRef\" class=\"calendar-header\">\n    <div class=\"calendar-header__navigation\">\n      <button type=\"button\" class=\"calendar-header__btn\" :aria-label=\"isRTL ? 'Next year' : 'Previous year'\"\n        @click=\"$emit('next-year')\">\n        &laquo;\n      </button>\n      <button type=\"button\" class=\"calendar-header__btn\" :aria-label=\"isRTL ? 'Next month' : 'Previous month'\"\n        @click=\"$emit('next-month')\">\n        &lsaquo;\n      </button>\n\n      <div class=\"calendar-header__current\">\n        <button type=\"button\" class=\"calendar-header__month calendar-header__month--clickable\"\n          @click=\"toggleMonthPicker\" :aria-label=\"'Select month'\">\n          {{ monthName }}\n        </button>\n        <button type=\"button\" class=\"calendar-header__year calendar-header__year--clickable\" @click=\"toggleYearPicker\"\n          :aria-label=\"'Select year'\">\n          {{ formattedYear }}\n        </button>\n\n        <!-- Month picker modal -->\n        <Teleport to=\"body\">\n          <div v-if=\"showMonthPicker\" :dir=\"localeConfig.direction === 'rtl' ? 'rtl' : 'ltr'\"\n            class=\"calendar-header__modal\" @click.self=\"closeMonthPicker\">\n            <div class=\"calendar-header__modal-content\">\n              <div class=\"calendar-header__modal-header\">\n                <span>{{ localeConfig.code === 'ar' ? 'اختر الشهر' : 'Select Month' }}</span>\n                <button type=\"button\" class=\"calendar-header__modal-close\" @click=\"closeMonthPicker\" aria-label=\"Close\">\n                  &times;\n                </button>\n              </div>\n              <div class=\"calendar-header__month-grid\">\n                <button v-for=\"monthIndex in 12\" :key=\"monthIndex\" type=\"button\"\n                  class=\"calendar-header__month-grid-item\"\n                  :class=\"{ 'calendar-header__month-grid-item--active': monthIndex === currentMonth }\"\n                  @click=\"selectMonth(monthIndex)\">\n                  {{ getMonthNameByIndex(monthIndex) }}\n                </button>\n              </div>\n              <div class=\"calendar-header__modal-actions\">\n                <button type=\"button\" class=\"calendar-header__modal-btn\" @click=\"goToTodayMonth\">\n                  {{ localeConfig.code === 'ar' ? 'الآن' : 'Now' }}\n                </button>\n                <button type=\"button\" class=\"calendar-header__modal-btn calendar-header__modal-btn--primary\"\n                  @click=\"closeMonthPicker\">\n                  {{ localeConfig.code === 'ar' ? 'حسنا' : 'OK' }}\n                </button>\n              </div>\n            </div>\n          </div>\n        </Teleport>\n\n        <!-- Year picker modal -->\n        <Teleport to=\"body\">\n          <div v-if=\"showYearPicker\" :dir=\"localeConfig.direction === 'rtl' ? 'rtl' : 'ltr'\"\n            class=\"calendar-header__modal\" @click.self=\"closeYearPicker\">\n            <div class=\"calendar-header__modal-content\">\n              <div class=\"calendar-header__modal-header\">\n                <button type=\"button\" class=\"calendar-header__modal-nav\" @click=\"previousDecade\"\n                  :aria-label=\"isRTL ? 'Next decade' : 'Previous decade'\">\n                  &laquo;\n                </button>\n                <span>{{ decadeStart }} - {{ decadeEnd }}</span>\n                <button type=\"button\" class=\"calendar-header__modal-nav\" @click=\"nextDecade\"\n                  :aria-label=\"isRTL ? 'Previous decade' : 'Next decade'\">\n                  &raquo;\n                </button>\n                <button type=\"button\" class=\"calendar-header__modal-close\" @click=\"closeYearPicker\" aria-label=\"Close\">\n                  &times;\n                </button>\n              </div>\n              <div class=\"calendar-header__year-grid\">\n                <button v-for=\"yearOption in yearOptions\" :key=\"yearOption\" type=\"button\"\n                  class=\"calendar-header__year-grid-item\"\n                  :class=\"{ 'calendar-header__year-grid-item--active': yearOption === year }\"\n                  @click=\"selectYear(yearOption)\">\n                  {{ formatNumber(yearOption, localeConfig) }}\n                </button>\n              </div>\n              <div class=\"calendar-header__modal-actions\">\n                <button type=\"button\" class=\"calendar-header__modal-btn\" @click=\"goToTodayYear\">\n                  {{ localeConfig.code === 'ar' ? 'الآن' : 'Now' }}\n                </button>\n                <button type=\"button\" class=\"calendar-header__modal-btn calendar-header__modal-btn--primary\"\n                  @click=\"closeYearPicker\">\n                  {{ localeConfig.code === 'ar' ? 'حسنا' : 'OK' }}\n                </button>\n              </div>\n            </div>\n          </div>\n        </Teleport>\n      </div>\n\n      <button type=\"button\" class=\"calendar-header__btn\" :aria-label=\"isRTL ? 'Previous month' : 'Next month'\"\n        @click=\"$emit('previous-month')\">\n        &rsaquo;\n      </button>\n      <button type=\"button\" class=\"calendar-header__btn\" :aria-label=\"isRTL ? 'Previous year' : 'Next year'\"\n        @click=\"$emit('previous-year')\">\n        &raquo;\n      </button>\n    </div>\n\n    <div class=\"calendar-header__actions\">\n      <!-- ... existing code ... -->\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, watch, computed, onMounted, onBeforeUnmount } from 'vue';\nimport { formatNumber, getLocale, GregorianAdapter, HijriAdapter } from '@dual-datepicker/core';\nimport type { CalendarAdapter, LocaleConfig } from '@dual-datepicker/core';\n\nconst props = defineProps<{\n  monthName: string;\n  year: number;\n  currentMonth: number;\n  calendar: 'gregorian' | 'hijri';\n  locale: string;\n}>();\n\nconst emit = defineEmits<{\n  'previous-month': [];\n  'next-month': [];\n  'previous-year': [];\n  'next-year': [];\n  'today': [];\n  'update:calendar': [value: 'gregorian' | 'hijri'];\n  'update:locale': [value: string];\n  'select-month': [month: number];\n  'select-year': [year: number];\n}>();\n\nconst showMonthPicker = ref(false);\nconst showYearPicker = ref(false);\nconst yearDecade = ref(props.year);\n\nconst localeConfig = computed<LocaleConfig>(() => getLocale(props.locale));\nconst isRTL = computed(() => localeConfig.value.direction === 'rtl');\nconst adapter = computed<CalendarAdapter>(() =>\n  props.calendar === 'hijri' ? new HijriAdapter() : new GregorianAdapter()\n);\nconst formattedYear = computed(() => formatNumber(props.year, localeConfig.value));\nconst decadeStart = computed(() => Math.floor(yearDecade.value / 10) * 10);\nconst decadeEnd = computed(() => decadeStart.value + 9);\nconst yearOptions = computed(() => {\n  const options = [];\n  for (let i = 0; i < 12; i++) {\n    options.push(decadeStart.value + i);\n  }\n  return options;\n});\n\nwatch(() => props.year, (newYear) => {\n  yearDecade.value = newYear;\n});\n\n\nfunction toggleMonthPicker() {\n  showMonthPicker.value = !showMonthPicker.value;\n  showYearPicker.value = false;\n}\n\nfunction toggleYearPicker() {\n  showYearPicker.value = !showYearPicker.value;\n  showMonthPicker.value = false;\n  yearDecade.value = props.year;\n}\n\nfunction closeMonthPicker() {\n  showMonthPicker.value = false;\n}\n\nfunction closeYearPicker() {\n  showYearPicker.value = false;\n}\n\nfunction getMonthNameByIndex(monthIndex: number) {\n  return adapter.value.getMonthName(monthIndex, localeConfig.value);\n}\n\nfunction selectMonth(monthIndex: number) {\n  emit('select-month', monthIndex);\n}\n\nfunction selectYear(yearValue: number) {\n  emit('select-year', yearValue);\n}\n\nfunction previousDecade() {\n  yearDecade.value = decadeStart.value - 10;\n}\n\nfunction nextDecade() {\n  yearDecade.value = decadeStart.value + 10;\n}\n\nfunction goToTodayMonth() {\n  const today = adapter.value.today();\n  emit('select-month', today.month);\n  closeMonthPicker();\n}\n\nfunction goToTodayYear() {\n  const today = adapter.value.today();\n  emit('select-year', today.year);\n  yearDecade.value = today.year;\n  closeYearPicker();\n}\n\n// Click outside handler to close modals\nconst headerRef = ref<HTMLElement | null>(null);\n\nfunction handleOutsideClick(event: MouseEvent) {\n  const target = event.target as HTMLElement;\n\n  // Don't close if clicking on month/year toggle buttons\n  if (target.closest('.calendar-header__month--clickable') ||\n    target.closest('.calendar-header__year--clickable')) {\n    return;\n  }\n\n  // Don't close if clicking on modal (which is teleported to body)\n  if (target.closest('.calendar-header__modal')) {\n    return;\n  }\n\n  // Close modals if click is outside the component\n  if (headerRef.value && !headerRef.value.contains(target)) {\n    showMonthPicker.value = false;\n    showYearPicker.value = false;\n  }\n}\n\nonMounted(() => {\n  // Close modals when clicking outside\n  document.addEventListener('click', handleOutsideClick);\n});\n\nonBeforeUnmount(() => {\n  document.removeEventListener('click', handleOutsideClick);\n});\n</script>\n","<template>\n  <div class=\"calendar-grid\" role=\"grid\">\n    <div class=\"calendar-grid__weekdays\" role=\"row\">\n      <div\n        v-for=\"(day, index) in calendarMonth.weekdayLabels\"\n        :key=\"index\"\n        class=\"calendar-grid__weekday\"\n        role=\"columnheader\"\n      >\n        {{ day }}\n      </div>\n    </div>\n    \n    <div class=\"calendar-grid__weeks\">\n      <div\n        v-for=\"(week, weekIndex) in calendarMonth.weeks\"\n        :key=\"weekIndex\"\n        class=\"calendar-grid__week\"\n        role=\"row\"\n      >\n        <button\n          v-for=\"(day, dayIndex) in week\"\n          :key=\"dayIndex\"\n          type=\"button\"\n          class=\"calendar-grid__day\"\n          :class=\"{\n            'calendar-grid__day--current-month': day.isCurrentMonth,\n            'calendar-grid__day--other-month': !day.isCurrentMonth,\n            'calendar-grid__day--today': day.isToday,\n            'calendar-grid__day--selected': day.isSelected,\n            'calendar-grid__day--disabled': day.isDisabled,\n            'calendar-grid__day--in-range': isInRange(day),\n            'calendar-grid__day--range-start': isRangeStart(day),\n            'calendar-grid__day--range-end': isRangeEnd(day)\n          }\"\n          :aria-label=\"formatDayLabel(day)\"\n          :aria-selected=\"day.isSelected\"\n          :disabled=\"day.isDisabled\"\n          role=\"gridcell\"\n          @click=\"onDayClick(day)\"\n        >\n          {{ formatDayNumber(day.date.day) }}\n        </button>\n      </div>\n    </div>\n    <div class=\"calendar-header__actions\">\n      <button type=\"button\" class=\"calendar-header__btn calendar-header__btn--today\" @click=\"$emit('today')\">\n        {{ locale.code === 'ar' ? 'اليوم' : 'Today' }}\n      </button>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { formatNumber } from '@dual-datepicker/core';\nimport type { CalendarMonth, CalendarDay, CalendarAdapter, LocaleConfig } from '@dual-datepicker/core';\n\ninterface DateRange {\n  start: { year: number; month: number; day: number } | null;\n  end: { year: number; month: number; day: number } | null;\n}\n\nconst props = defineProps<{\n  calendarMonth: CalendarMonth;\n  adapter: CalendarAdapter;\n  locale: LocaleConfig;\n  selectedRange?: DateRange | null;\n}>();\n\nconst emit = defineEmits<{\n  'select-date': [day: CalendarDay];\n  'today': [];\n}>();\n\nfunction onDayClick(day: CalendarDay) {\n  if (day.isDisabled) return;\n  emit('select-date', day);\n}\n\nfunction formatDayLabel(day: CalendarDay): string {\n  return props.adapter.format(day.date, 'dd MMMM yyyy', props.locale);\n}\n\nfunction formatDayNumber(day: number): string {\n  return formatNumber(day, props.locale);\n}\n\nfunction isInRange(day: CalendarDay): boolean {\n  if (!props.selectedRange || !props.selectedRange.start || !props.selectedRange.end) {\n    return false;\n  }\n  const compareStart = props.adapter.compare(day.date, props.selectedRange.start);\n  const compareEnd = props.adapter.compare(day.date, props.selectedRange.end);\n  return compareStart > 0 && compareEnd < 0;\n}\n\nfunction isRangeStart(day: CalendarDay): boolean {\n  if (!props.selectedRange || !props.selectedRange.start) {\n    return false;\n  }\n  return props.adapter.isSameDay(day.date, props.selectedRange.start);\n}\n\nfunction isRangeEnd(day: CalendarDay): boolean {\n  if (!props.selectedRange || !props.selectedRange.end) {\n    return false;\n  }\n  return props.adapter.isSameDay(day.date, props.selectedRange.end);\n}\n</script>\n","<template>\n  <div class=\"dual-datepicker\" ref=\"datepickerRef\" :dir=\"locale.direction\">\n    <div class=\"dual-datepicker__input-wrapper\">\n      <div class=\"dual-datepicker__input-container\" :style=\"{ direction: locale.direction }\">\n        <button type=\"button\" class=\"dual-datepicker__toggle\"\n          :class=\"{ 'dual-datepicker__toggle--rtl': locale.direction === 'rtl' }\"\n          :aria-label=\"isOpen ? 'Close calendar' : 'Open calendar'\" @click=\"toggle\">\n          <svg version=\"1.1\" width=\"16px\" height=\"16px\" viewBox=\"0 0 448 512\" xmlns=\"http://www.w3.org/2000/svg\"\n            fill=\"#AAA\">\n            <path d=\"M436 160H12C5.4 160 0 154.6 0 148V112C0 85.5 21.5 64 48 64H96V12C96 5.4 101.4 0 108 0H148C154.6 0 160 5.4 160\n              12V64H288V12C288 5.4 293.4 0 300 0H340C346.6 0 352 5.4 352 12V64H400C426.5 64 448 85.5 448 112V148C448 154.6\n              442.6 160 436 160zM12 192H436C442.6 192 448 197.4 448 204V464C448 490.5 426.5 512 400 512H48C21.5 512 0 490.5 0\n              464V204C0 197.4 5.4 192 12 192zM128 396C128 389.4 122.6 384 116 384H76C69.4 384 64 389.4 64 396V436C64 442.6 69.4\n              448 76 448H116C122.6 448 128 442.6 128 436V396zM128 268C128 261.4 122.6 256 116 256H76C69.4 256 64 261.4 64\n              268V308C64 314.6 69.4 320 76 320H116C122.6 320 128 314.6 128 308V268zM256 396C256 389.4 250.6 384 244\n              384H204C197.4 384 192 389.4 192 396V436C192 442.6 197.4 448 204 448H244C250.6 448 256 442.6 256 436V396zM256\n              268C256 261.4 250.6 256 244 256H204C197.4 256 192 261.4 192 268V308C192 314.6 197.4 320 204 320H244C250.6 320 256\n              314.6 256 308V268zM384 396C384 389.4 378.6 384 372 384H332C325.4 384 320 389.4 320 396V436C320 442.6 325.4 448\n              332 448H372C378.6 448 384 442.6 384 436V396zM384 268C384 261.4 378.6 256 372 256H332C325.4 256 320 261.4 320\n              268V308C320 314.6 325.4 320 332 320H372C378.6 320 384 314.6 384 308V268z\"></path>\n          </svg>\n        </button>\n        <input :value=\"editable ? inputValue : formattedDate\" type=\"text\" class=\"dual-datepicker__input\" :class=\"{\n          'dual-datepicker__input--has-clear': (selectedDate || (range && selectedRange)) && clearable,\n          'dual-datepicker__input--error': inputError,\n          'dual-datepicker__input--rtl': locale.direction === 'rtl',\n          'dual-datepicker__input--ltr': locale.direction === 'ltr',\n          [inputClass]: inputClass\n        }\" :placeholder=\"placeholder\" :readonly=\"!editable\" :aria-label=\"ariaLabel\" :aria-expanded=\"isOpen\"\n          :aria-invalid=\"inputError\" @click=\"!editable && toggle()\" @keydown.enter=\"!editable && toggle()\"\n          @keydown.space.prevent=\"!editable && toggle()\" @input=\"onInputChange\" @blur=\"onInputBlur\"\n          @focus=\"onInputFocus\" />\n        <button v-if=\"(selectedDate || (range && selectedRange)) && clearable\" type=\"button\"\n          class=\"dual-datepicker__clear\" :class=\"{ 'dual-datepicker__clear--rtl': locale.direction === 'rtl' }\"\n          :aria-label=\"'Clear date'\" @click.stop=\"clearSelection\">\n          ×\n        </button>\n      </div>\n    </div>\n\n    <Teleport to=\"body\">\n      <div v-if=\"isOpen\" class=\"dual-datepicker__dropdown\" role=\"dialog\" aria-modal=\"true\"\n        :aria-label=\"`${calendarType} calendar picker`\">\n        <div class=\"dual-datepicker__panel\">\n          <CalendarHeader :month-name=\"currentMonthName\" :year=\"currentYear\" :current-month=\"currentMonth\"\n            :calendar=\"calendarType\" :locale=\"localeCode\" @previous-month=\"goToPreviousMonth\"\n            @next-month=\"goToNextMonth\" @previous-year=\"goToPreviousYear\" @next-year=\"goToNextYear\"\n            @today=\"goToTodayMonth\" @update:calendar=\"onCalendarChange\" @update:locale=\"onLocaleChange\"\n            @select-month=\"onSelectMonth\" @select-year=\"onSelectYear\" />\n\n          <CalendarGrid :calendar-month=\"calendarMonth\" :adapter=\"adapter\" :locale=\"locale\"\n            :selected-range=\"range ? selectedRange : null\" @select-date=\"onSelectDate\" @today=\"goToTodayMonth\" />\n        </div>\n      </div>\n    </Teleport>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, watch, ref, onMounted, onBeforeUnmount, nextTick } from 'vue';\nimport type { CalendarDate } from '@dual-datepicker/core';\nimport { useDatePicker, type DateRange } from '../composables/useDatePicker';\nimport CalendarHeader from './CalendarHeader.vue';\nimport CalendarGrid from './CalendarGrid.vue';\n\ninterface Props {\n  modelValue?: CalendarDate | DateRange | null;\n  calendar?: 'gregorian' | 'hijri';\n  locale?: string;\n  range?: boolean;\n  time?: boolean;\n  placeholder?: string;\n  ariaLabel?: string;\n  clearable?: boolean;\n  format?: string;\n  inputFormat?: string | null;\n  editable?: boolean;\n  minDate?: CalendarDate | null;\n  maxDate?: CalendarDate | null;\n  disabledDates?: CalendarDate[];\n  disabledDaysOfWeek?: number[];\n  inputClass?: string;\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  modelValue: null,\n  calendar: 'gregorian',\n  locale: 'en',\n  range: false,\n  time: false,\n  placeholder: 'Select date',\n  ariaLabel: 'Date picker',\n  clearable: true,\n  format: 'dd/MM/yyyy',\n  inputFormat: null,\n  editable: false,\n  minDate: null,\n  maxDate: null,\n  disabledDates: () => [],\n  disabledDaysOfWeek: () => [],\n  inputClass: ''\n});\n\nconst emit = defineEmits<{\n  'update:modelValue': [value: CalendarDate | DateRange | null];\n  'change': [value: CalendarDate | DateRange | null];\n}>();\n\nconst datepickerRef = ref<HTMLElement | null>(null);\n\nconst {\n  selectedDate,\n  selectedRange,\n  currentMonth,\n  currentYear,\n  currentMonthName,\n  isOpen,\n  calendarMonth,\n  adapter,\n  locale,\n  calendarType,\n  localeCode,\n  inputValue,\n  inputError,\n  displayFormat,\n  selectDate,\n  clearSelection,\n  updateView,\n  goToNextMonth,\n  goToPreviousMonth,\n  goToNextYear,\n  goToPreviousYear,\n  goToTodayMonth,\n  switchCalendar,\n  toggle,\n  formattedDate,\n  parseInputValue,\n  updateInputValue,\n  validateDate\n} = useDatePicker({\n  calendar: computed(() => props.calendar),\n  locale: computed(() => props.locale),\n  range: computed(() => props.range),\n  time: computed(() => props.time),\n  modelValue: computed(() => props.modelValue),\n  format: computed(() => props.format),\n  inputFormat: computed(() => props.inputFormat),\n  minDate: computed(() => props.minDate),\n  maxDate: computed(() => props.maxDate),\n  disabledDates: computed(() => props.disabledDates),\n  disabledDaysOfWeek: computed(() => props.disabledDaysOfWeek)\n});\n\n// Sync selected date/range with v-model\nwatch([selectedDate, selectedRange], () => {\n  if (props.range) {\n    emit('update:modelValue', selectedRange.value);\n    emit('change', selectedRange.value);\n  } else {\n    emit('update:modelValue', selectedDate.value);\n    emit('change', selectedDate.value);\n  }\n}, { deep: true });\n\n// Sync v-model changes back to internal state\nwatch(() => props.modelValue, (newVal) => {\n  if (props.range) {\n    if (newVal && typeof newVal === 'object' && 'start' in newVal) {\n      // Already handled by composable watch\n      updateInputValue();\n    }\n  } else {\n    if (newVal && !('start' in newVal)) {\n      // Already handled by composable watch\n      updateInputValue();\n    }\n  }\n});\n\n// Watch range prop changes\nwatch(() => props.range, (newVal) => {\n  if (newVal) {\n    selectedDate.value = null;\n    selectedRange.value = (props.modelValue as DateRange) || { start: null, end: null };\n  } else {\n    selectedRange.value = { start: null, end: null };\n    selectedDate.value = (props.modelValue as CalendarDate) || null;\n  }\n  updateInputValue();\n});\n\nfunction onSelectDate(day: any) {\n  if (day.isDisabled) return;\n  selectDate(day.date);\n  updateInputValue();\n}\n\nfunction onSelectMonth(month: number) {\n  updateView(currentYear.value, month);\n}\n\nfunction onSelectYear(year: number) {\n  updateView(year, currentMonth.value);\n}\n\nfunction onCalendarChange(newCalendar: 'gregorian' | 'hijri') {\n  switchCalendar(newCalendar);\n  updateInputValue();\n}\n\nfunction onLocaleChange(newLocale: string) {\n  localeCode.value = newLocale;\n}\n\nfunction onInputChange(event: Event) {\n  if (!props.editable) return;\n  const target = event.target as HTMLInputElement;\n  inputValue.value = target.value;\n  inputError.value = false;\n}\n\nfunction onInputBlur() {\n  if (!props.editable) return;\n  parseInputValue(inputValue.value);\n  updateInputValue();\n}\n\nfunction onInputFocus() {\n  if (!props.editable) return;\n  // Select all text on focus for easy editing\n  nextTick(() => {\n    const input = datepickerRef.value?.querySelector('.dual-datepicker__input') as HTMLInputElement;\n    if (input) {\n      input.select();\n    }\n  });\n}\n\nfunction handleOutsideClick(event: MouseEvent) {\n  const target = event.target as HTMLElement;\n  \n  // Check if click is on the month/year picker modal\n  const modal = target.closest('.calendar-header__modal');\n  const modalContent = target.closest('.calendar-header__modal-content');\n  \n  // If click is on modal, don't close the main dropdown\n  if (modal || modalContent) {\n    return;\n  }\n  \n  // Check if click is inside the teleported dropdown\n  const dropdown = target.closest('.dual-datepicker__dropdown');\n  if (dropdown) {\n    return;\n  }\n  \n  // Check if click is inside the input container\n  if (datepickerRef.value && datepickerRef.value.contains(target)) {\n    return;\n  }\n  \n  // Close dropdown if click is outside both input and dropdown\n  isOpen.value = false;\n}\n\nonMounted(() => {\n  // Close dropdown when clicking outside\n  document.addEventListener('click', handleOutsideClick);\n  // Initialize input value\n  updateInputValue();\n});\n\nonBeforeUnmount(() => {\n  document.removeEventListener('click', handleOutsideClick);\n});\n</script>\n","import type { App } from 'vue';\nimport DualDatePicker from './components/DualDatePicker.vue';\nimport './styles/datepicker.css';\n\n// Export components\nexport { DualDatePicker };\n\n// Export composables\nexport * from './composables';\n\n// Export types from core\nexport type {\n    CalendarDate,\n    CalendarAdapter,\n    LocaleConfig,\n    CalendarMonth,\n    CalendarDay\n} from '@dual-datepicker/core';\n\n// Vue plugin\nexport default {\n    install(app: App) {\n        app.component('DualDatePicker', DualDatePicker);\n    }\n};\n"],"names":["useDatePicker","options","calendarType","ref","localeCode","isRange","adapter","computed","HijriAdapter","GregorianAdapter","locale","getLocale","dateFormat","inputDateFormat","minDate","maxDate","disabledDates","disabledDaysOfWeek","modelValue","_a","selectedDate","selectedRange","today","viewMonth","viewYear","currentMonth","currentYear","focusedDate","isOpen","inputValue","inputError","calendarMonth","generateCalendarMonth","currentMonthName","updateView","year","month","goToNextMonth","next","nextMonth","goToPreviousMonth","prev","previousMonth","goToNextYear","nextYear","goToPreviousYear","previousYear","goToTodayMonth","todayDate","validateDate","selectDate","date","clearSelection","d","dayOfWeek","displayFormat","parseInputValue","value","format","parts","p","start","end","compare","parsed","updateInputValue","formattedDate","switchCalendar","newCalendar","jsDate","newAdapter","convertedStart","jsDateEnd","convertedEnd","toggle","open","close","watch","newVal","props","__props","emit","__emit","showMonthPicker","showYearPicker","yearDecade","localeConfig","isRTL","formattedYear","formatNumber","decadeStart","decadeEnd","yearOptions","newYear","toggleMonthPicker","toggleYearPicker","closeMonthPicker","closeYearPicker","getMonthNameByIndex","monthIndex","selectMonth","selectYear","yearValue","previousDecade","nextDecade","goToTodayYear","headerRef","handleOutsideClick","event","target","onMounted","onBeforeUnmount","_createElementBlock","_createElementVNode","_hoisted_1","$emit","_hoisted_2","_hoisted_3","_hoisted_4","_createBlock","_Teleport","_hoisted_6","_hoisted_7","_toDisplayString","_hoisted_8","_Fragment","_renderList","_normalizeClass","$event","_hoisted_9","_hoisted_10","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","yearOption","_unref","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","onDayClick","day","formatDayLabel","formatDayNumber","isInRange","compareStart","compareEnd","isRangeStart","isRangeEnd","_openBlock","index","week","weekIndex","dayIndex","_hoisted_5","datepickerRef","onSelectDate","onSelectMonth","onSelectYear","onCalendarChange","onLocaleChange","newLocale","onInputChange","onInputBlur","onInputFocus","nextTick","input","modal","modalContent","_normalizeStyle","_cache","args","_withKeys","_withModifiers","_createVNode","CalendarHeader","CalendarGrid","app","DualDatePicker"],"mappings":"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"}